MAIN:
	H[3];
	SET1 WH_SEL;
	TRIGGER1 WH_EN;
	COPY WH_COM, H[0];
	TRIGGER1 WH_EN;
	COPY WH_COM, H[1];
	TRIGGER1 WH_EN;
	COPY WH_COM, H[2];
	SET0;
	NAR H[0];
	NAR H[1];
	NAR H[2];
	INV0;
	
READ1 A:
	local H
	NAW H;
	NAR ACC;
	NAR H;
	NAR A;
	NAR ACC;
	
COPY2 S, T:
	READ1 S;
	WRITE1 T;
	
TRIGGER1 A:
	SET0;
	NAW A;
	NAW A;

SET0:
	shared H
	NAW H;
	NAR ACC;
	NAW H;
	NAR H;
	
SET1 A:
	SET0;
	WRITE1 A;
	
WRITE1 A:
	NAW A;
	INV0;
	NAW A;
	INV0;
	
INV0:
	NAR ACC;