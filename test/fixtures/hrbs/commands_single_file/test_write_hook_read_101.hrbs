MAIN:
	alloc H[3]
	SET1 WH_SEL;
	TRIGGER1 WH_EN;
	COPY2 WH_COM, H[0];
	TRIGGER1 WH_EN;
	COPY2 WH_COM, H[1];
	TRIGGER1 WH_EN;
	COPY2 WH_COM, H[2];
	SET0;
	COMPARE1 H[0];
	INV0;
	COMPARE1 H[1];
	COMPARE1 H[2];

COMPARE1 A:
	XOR1 A;
	INV0;
	
AND1 A:
	NAR A;
	INV0;
	
OR1 A:
	INV1 A;
	INV0;
	NAR A;
	INV1 A;
	
INV1 A:
	shared alloc H
	WRITE1 H;
	NOT1 A;
	WRITE1 A;
	READ1 H;
	
NOT1 A:
	READ1 A;
	INV0;
	
XOR1 A:
	shared alloc H[2]
	WRITE1 H[0];
	INV0;
	AND1 A;
	WRITE1 H[1];	
	INV1 A;
	READ1 H[0];
	AND1 A;
	OR1 H[1];
	INV1 A;
	
NOOP0:
	INV0;
	INV0;

READ1 A:
	SET0;
	NAR A;
	INV0;
	
COPY2 I, O:
	shared alloc H
	WRITE1 H;
	READ1 I;	
	WRITE1 O;
	READ1 H;
	
TRIGGER1 A:
	SET0;
	NAW A;
	NAW A;

#00 01 11 10 10
#01 01 11 10 10
#10 11 01 01 11
#11 10 00 01 11
SET0:
	shared alloc H
	NAW H;
	INV0;
	NAW H;
	NAR H;
	
SET1 A:
	local alloc H
	WRITE1 H;
	SET0;
	WRITE1 A;
	READ1 H;

#00 01 11 10 00
#01 01 11 10 00
#10 11 01 01 11
#11 10 00 01 11
WRITE1 A:
	NAW A;
	INV0;
	NAW A;
	INV0;
	
INV0:
	NAR ACC;